<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kaveesha Heshan - Software Engineer Portfolio</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f7fee7',
              100: '#ecfccb',
              200: '#d9f99d',
              300: '#bef264',
              400: '#a3e635',
              500: '#84cc16',
              600: '#65a30d',
              700: '#4d7c0f',
              800: '#3f6212',
              900: '#365314',
            }
          }
        }
      }
    }
  </script>

  <style>
    .gradient-text {
      background: linear-gradient(135deg, #84cc16, #a3e635);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .typing-text {
      border-right: 3px solid #84cc16;
      animation: blink 0.75s step-end infinite;
      display: inline-block;
    }
    @keyframes blink { 50% { border-color: transparent; } }

    .profile-image-container {
      position: relative;
      width: 256px;
      height: 256px;
    }
    @media (min-width: 1024px) {
      .profile-image-container { width: 320px; height: 320px; }
    }
    .profile-border {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: #84cc16;
    }
    .profile-image-inner {
      position: relative;
      width: calc(100% - 16px);
      height: calc(100% - 16px);
      margin: 8px;
      background: black;
      border-radius: 50%;
      overflow: hidden;
    }
    body.light .profile-image-inner { background: white; }

    /* ✅ FIX: keep canvas inside hero + don't block clicks */
    #three-bg { pointer-events: none; }
    #three-bg canvas {
      position: absolute;
      inset: 0;
      width: 100% !important;
      height: 100% !important;
      pointer-events: none;
    }

    /* =========================
       ✅ MOBILE MENU ANIMATION
       ========================= */
    #mobile-menu {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transform: translateY(-10px);
      pointer-events: none;
      transition: max-height 350ms ease, opacity 250ms ease, transform 250ms ease;
    }

    #mobile-menu.menu-open {
      max-height: 420px; /* enough for items */
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    /* Stagger items */
    #mobile-menu .mobile-link {
      opacity: 0;
      transform: translateY(-6px);
      transition: opacity 250ms ease, transform 250ms ease;
    }
    #mobile-menu.menu-open .mobile-link {
      opacity: 1;
      transform: translateY(0);
    }

    /* =========================
       ✅ ABOUT SECTION ANIMATION
       ========================= */
    .reveal {
      opacity: 0;
      transform: translateY(18px);
      transition: opacity .7s ease, transform .7s ease;
    }
    .reveal.show {
      opacity: 1;
      transform: translateY(0);
    }

    .reveal-stagger > * {
      opacity: 0;
      transform: translateY(12px);
      transition: opacity .6s ease, transform .6s ease;
    }
    .reveal.show .reveal-stagger > * {
      opacity: 1;
      transform: translateY(0);
    }

    .chip {
      opacity: 0;
      transform: scale(.95) translateY(8px);
      transition: opacity .5s ease, transform .5s ease, box-shadow .25s ease;
      will-change: transform, opacity;
    }
    .reveal.show .chip {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
    .chip:hover {
      transform: scale(1.06);
      box-shadow: 0 10px 22px rgba(132, 204, 22, .18);
    }
  </style>
</head>

<body class="bg-white dark:bg-black text-gray-900 dark:text-white transition-colors duration-300">

  <!-- ================= NAVBAR ================= -->
  <nav class="fixed top-0 w-full bg-white/90 dark:bg-black/90 backdrop-blur-sm z-50 border-b border-gray-200 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
      <div class="flex justify-between items-center py-6">

        <!-- Logo -->
        <div class="flex items-center space-x-3">
          <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-primary-600">
            <img src="asset/kaveesha.jpeg" alt="Kaveesha Heshan" class="w-full h-full object-cover">
          </div>
          <span class="text-xl font-bold">Kaveesha Heshan</span>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-8">
          <a href="#home" class="hover:text-primary-400 transition-colors">Home</a>
          <a href="#about" class="hover:text-primary-400 transition-colors">About</a>
          <a href="#education" class="hover:text-primary-400 transition-colors">Education</a>
          <a href="#projects" class="hover:text-primary-400 transition-colors">Projects</a>
          <a href="#contact" class="hover:text-primary-400 transition-colors">Contact</a>
          <a href="/path/to/your/cv.pdf" class="hover:text-primary-400 transition-colors">CV</a>

          <button class="theme-toggle-btn p-2 rounded-lg hover:text-primary-400 transition-colors" aria-label="Toggle theme">
            <i class="theme-toggle-dark-icon hidden w-5 h-5" data-lucide="moon"></i>
            <i class="theme-toggle-light-icon w-5 h-5" data-lucide="sun"></i>
          </button>
        </div>

        <!-- ✅ Mobile Button (menu ↔ close) -->
        <button id="mobile-menu-btn" class="md:hidden p-2" aria-label="Toggle menu" aria-expanded="false">
          <i id="icon-menu" data-lucide="menu" class="w-6 h-6"></i>
          <i id="icon-close" data-lucide="x" class="w-6 h-6 hidden"></i>
        </button>
      </div>

      <!-- ✅ Mobile Menu (animated) -->
      <div id="mobile-menu" class="md:hidden pb-4">
        <div class="flex flex-col space-y-3">
          <a href="#home" class="mobile-link hover:text-primary-400 transition-colors">Home</a>
          <a href="#about" class="mobile-link hover:text-primary-400 transition-colors">About</a>
          <a href="#education" class="mobile-link hover:text-primary-400 transition-colors">Education</a>
          <a href="#projects" class="mobile-link hover:text-primary-400 transition-colors">Projects</a>
          <a href="#contact" class="mobile-link hover:text-primary-400 transition-colors">Contact</a>
          <a href="/path/to/your/cv.pdf" class="mobile-link hover:text-primary-400 transition-colors">CV</a>

          <button class="theme-toggle-btn mobile-link hover:text-primary-400 transition-colors flex items-center space-x-2 py-1">
            <i class="theme-toggle-dark-icon hidden w-5 h-5" data-lucide="moon"></i>
            <i class="theme-toggle-light-icon w-5 h-5" data-lucide="sun"></i>
            <span>Toggle Theme</span>
          </button>
        </div>
      </div>

    </div>
  </nav>

  <!-- ================= HOME ================= -->
  <section id="home" class="relative min-h-screen flex items-center px-6 lg:px-8 pt-28 overflow-hidden">
    <!-- ✅ Three.js background -->
    <div id="three-bg" class="absolute inset-0 -z-10"></div>

    <!-- ✅ Keep content above canvas -->
    <div class="relative z-10 max-w-7xl mx-auto w-full pl-12 lg:pl-16 grid lg:grid-cols-2 gap-12 items-center">
      <div>
        <h1 class="text-5xl lg:text-7xl font-bold mb-8">
          Hi, I'm <span class="gradient-text">Kaveesha Heshan</span>
        </h1>

        <p class="text-2xl lg:text-3xl text-gray-700 dark:text-gray-300 mb-8">
          <span id="typing-text" class="typing-text"></span>
        </p>

        <div class="flex items-center space-x-6 mb-8">
          <a href="https://github.com/yourusername" target="_blank" class="hover:text-primary-400 transition-colors">
            <i data-lucide="github" class="w-10 h-10"></i>
          </a>
          <a href="https://linkedin.com/in/yourusername" target="_blank" class="hover:text-primary-400 transition-colors">
            <i data-lucide="linkedin" class="w-10 h-10"></i>
          </a>
        </div>

        <a href="/path/to/your/cv.pdf" target="_blank"
          class="inline-block px-8 py-4 border-2 border-primary-600 text-primary-400 rounded-lg hover:bg-primary-600 hover:text-white transition-all text-lg font-semibold">
          Download CV
        </a>
      </div>

      <div class="flex justify-center lg:justify-end">
        <div class="profile-image-container">
          <div class="profile-border"></div>
          <div class="profile-image-inner">
            <img src="asset/kaveesha.jpeg" alt="Kaveesha Heshan" class="w-full h-full object-cover">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= ABOUT (UPDATED WITH ANIMATION) ================= -->
 <section id="about" class="py-20 px-6 lg:px-8 reveal">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-bold mb-12">
      <span class="gradient-text">About Me</span>
    </h2>

    <!-- About Text (Top) -->
    <div class="reveal-stagger">
      <p class="text-gray-700 dark:text-gray-300 text-lg mb-6 leading-relaxed">
        With over X years of experience in software development, I specialize in creating 
        robust and scalable applications. My journey in tech started with a curiosity 
        about how things work, which led me to pursue computer science and develop 
        expertise in various programming languages and frameworks.
      </p>

      <p class="text-gray-700 dark:text-gray-300 text-lg mb-8 leading-relaxed">
        I'm passionate about clean code, user experience, and staying up-to-date with 
        the latest technologies. When I'm not coding, you can find me contributing to 
        open-source projects or learning about emerging tech trends.
      </p>

      <div class="space-y-4 mb-12">
        <div class="flex items-center space-x-4">
          <i data-lucide="mail" class="w-6 h-6 text-primary-400"></i>
          <span class="text-gray-700 dark:text-gray-300">kaveesha.h927@gmail.com</span>
        </div>
        <div class="flex items-center space-x-4">
          <i data-lucide="map-pin" class="w-6 h-6 text-primary-400"></i>
          <span class="text-gray-700 dark:text-gray-300">Sri Lanka</span>
        </div>
        <div class="flex items-center space-x-4">
          <i data-lucide="phone" class="w-6 h-6 text-primary-400"></i>
          <span class="text-gray-700 dark:text-gray-300">0701452284</span>
        </div>
      </div>
    </div>

    <!-- ✅ Technical Skills (Bottom) -->
    <div>
      <h3 class="text-2xl font-semibold mb-6 text-primary-400">Technical Skills</h3>

      <div class="space-y-6">
        <div>
          <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">Frontend</h4>
          <div class="flex flex-wrap gap-2">
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">JavaScript</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">TypeScript</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">React</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Next.js</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Tailwind CSS</span>
          </div>
        </div>

        <div>
          <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">Backend</h4>
          <div class="flex flex-wrap gap-2">
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Node.js</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Express</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Python</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Django</span>
          </div>
        </div>

        <div>
          <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">Databases</h4>
          <div class="flex flex-wrap gap-2">
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">MongoDB</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">MySQL</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">PostgreSQL</span>
          </div>
        </div>

        <div>
          <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">Tools</h4>
          <div class="flex flex-wrap gap-2">
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Git</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Docker</span>
            <span class="chip px-4 py-2 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium">Figma</span>
          </div>
        </div>

      </div>
    </div>

  </div>
</section>


  <section id="education" class="py-20 px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-4xl font-bold mb-8">Education</h2>
      <p class="text-gray-700 dark:text-gray-300">BSc (Hons) IT – Software Engineering (SLIIT)</p>
    </div>
  </section>

  <section id="projects" class="py-20 px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-4xl font-bold mb-8 gradient-text">Projects</h2>
      <p class="text-gray-700 dark:text-gray-300">E-commerce, Task Management, Dashboards</p>
    </div>
  </section>

  <section id="contact" class="py-20 px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-4xl font-bold mb-8 gradient-text">Contact</h2>
      <p class="text-gray-700 dark:text-gray-300">kaveesha.h927@gmail.com</p>
    </div>
  </section>

  <footer class="py-8 text-center text-gray-500 border-t border-gray-200 dark:border-gray-800">
    © 2024 Kaveesha Heshan. All rights reserved.
  </footer>

  <!-- ================= SCRIPTS ================= -->
  <script>
    lucide.createIcons();

    // ✅ Mobile menu animation + icon swap + stagger
    const mobileBtn = document.getElementById("mobile-menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const iconMenu = document.getElementById("icon-menu");
    const iconClose = document.getElementById("icon-close");

    const mobileLinks = mobileMenu.querySelectorAll(".mobile-link");
    mobileLinks.forEach((el, idx) => {
      el.style.transitionDelay = `${idx * 60}ms`;
    });

    function setMenuOpen(open) {
      mobileBtn.setAttribute("aria-expanded", open ? "true" : "false");
      mobileMenu.classList.toggle("menu-open", open);
      iconMenu.classList.toggle("hidden", open);
      iconClose.classList.toggle("hidden", !open);
    }

    mobileBtn.addEventListener("click", () => {
      const isOpen = mobileMenu.classList.contains("menu-open");
      setMenuOpen(!isOpen);
    });

    mobileMenu.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener("click", () => setMenuOpen(false));
    });

    // Theme toggle
    const allThemeToggleBtns = document.querySelectorAll('.theme-toggle-btn');
    const allDarkIcons = document.querySelectorAll('.theme-toggle-dark-icon');
    const allLightIcons = document.querySelectorAll('.theme-toggle-light-icon');

    const setDarkTheme = () => {
      document.documentElement.classList.add('dark');
      localStorage.theme = 'dark';
      allDarkIcons.forEach(i => i.classList.add('hidden'));
      allLightIcons.forEach(i => i.classList.remove('hidden'));
      document.body.classList.remove('light');
    };

    const setLightTheme = () => {
      document.documentElement.classList.remove('dark');
      localStorage.theme = 'light';
      allDarkIcons.forEach(i => i.classList.remove('hidden'));
      allLightIcons.forEach(i => i.classList.add('hidden'));
      document.body.classList.add('light');
    };

    if (localStorage.theme === 'light') setLightTheme(); else setDarkTheme();

    allThemeToggleBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        if (document.documentElement.classList.contains('dark')) setLightTheme();
        else setDarkTheme();
        lucide.createIcons();
      });
    });

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const target = document.querySelector(this.getAttribute('href'));
        if (!target) return;
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // ✅ About scroll reveal + chip stagger
    (() => {
      const revealEls = document.querySelectorAll(".reveal");

      const applyChipStagger = (section) => {
        const chips = section.querySelectorAll(".chip");
        chips.forEach((chip, idx) => {
          chip.style.transitionDelay = `${idx * 40}ms`;
        });

        const staggerKids = section.querySelectorAll(".reveal-stagger > *");
        staggerKids.forEach((el, idx) => {
          el.style.transitionDelay = `${idx * 120}ms`;
        });
      };

      revealEls.forEach(el => applyChipStagger(el));

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add("show");
        });
      }, { threshold: 0.15 });

      revealEls.forEach(el => io.observe(el));
    })();
  </script>

  <!-- ✅ FIXED THREE.JS -->
  <script>
    (() => {
      const container = document.getElementById("three-bg");
      if (!container) return;

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(60, 1, 1, 1000);
      camera.position.z = 80;

      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      container.appendChild(renderer.domElement);

      const geometry = new THREE.BufferGeometry();
      const COUNT = 900;
      const positions = new Float32Array(COUNT * 3);

      for (let i = 0; i < COUNT * 3; i += 3) {
        positions[i] = (Math.random() - 0.5) * 200;
        positions[i + 1] = (Math.random() - 0.5) * 120;
        positions[i + 2] = (Math.random() - 0.5) * 200;
      }

      geometry.setAttribute("position", new THREE.BufferAttribute(positions, 3));

      const material = new THREE.PointsMaterial({
        color: 0xa3e635,
        size: 1.1,
        opacity: 0.6,
        transparent: true,
        depthWrite: false
      });

      const points = new THREE.Points(geometry, material);
      scene.add(points);

      function resize() {
        const { width, height } = container.getBoundingClientRect();
        renderer.setSize(width, height, false);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      }

      resize();
      window.addEventListener("resize", resize);

      function animate() {
        points.rotation.y += 0.0004;
        points.rotation.x += 0.0002;
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
      }
      animate();
    })();
  </script>

  <!-- Typing effect -->
  <script>
    const txt = document.getElementById("typing-text");
    const words = ["Software Engineer Undergraduate", "Full Stack Developer", "UI/UX Designer"];
    let i = 0, j = 0, d = false;

    (function type(){
      txt.textContent = words[i].substring(0, j);
      d ? j-- : j++;
      if (j === words[i].length + 1) d = true;
      if (j === 0) { d = false; i = (i + 1) % words.length; }
      setTimeout(type, d ? 50 : 100);
    })();
  </script>

</body>
</html>
